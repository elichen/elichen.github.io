<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Jazz Changes Trainer</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1/dist/magentamusic.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Jazz Changes Trainer</h1>
            <p class="subtitle">Learn to solo over chord changes</p>
            <p class="mobile-hint">Swipe left/right to change chords â€¢ Tap notes to hear them</p>
        </header>

        <section class="chord-display">
            <div class="current-chord">
                <span class="chord-label">Current Chord</span>
                <span class="chord-name" id="currentChord">Dm7</span>
                <span class="chord-function" id="chordFunction">ii</span>
            </div>
            <div class="scale-info">
                <span class="scale-label">Scale</span>
                <span class="scale-name" id="scaleName">D Dorian</span>
            </div>
        </section>

        <section class="fretboard-container">
            <div class="fretboard" id="fretboard">
                <!-- Generated by JavaScript -->
            </div>
            <div class="fret-numbers" id="fretNumbers">
                <!-- Generated by JavaScript -->
            </div>
        </section>

        <section class="legend">
            <div class="legend-item">
                <span class="dot root"></span>
                <span>Root</span>
            </div>
            <div class="legend-item">
                <span class="dot chord-tone"></span>
                <span>Chord Tone (3, 5, 7)</span>
            </div>
            <div class="legend-item">
                <span class="dot tension"></span>
                <span>Tension (9, 11, 13)</span>
            </div>
            <div class="legend-item">
                <span class="dot scale-tone"></span>
                <span>Scale Tone</span>
            </div>
            <div class="legend-item">
                <span class="dot avoid"></span>
                <span>Avoid Note</span>
            </div>
        </section>

        <section class="progression-section">
            <h2>Progression</h2>
            <div class="progression-display" id="progressionDisplay">
                <!-- Generated by JavaScript -->
            </div>
            <div class="progression-select">
                <label for="progressionSelect">Choose Progression:</label>
                <select id="progressionSelect">
                    <option value="ii-V-I-major">ii-V-I (Major)</option>
                    <option value="ii-V-I-minor">ii-V-I (Minor)</option>
                    <option value="I-vi-ii-V">I-vi-ii-V (Rhythm Changes)</option>
                    <option value="blues">12-Bar Blues</option>
                    <option value="autumn-leaves">Autumn Leaves (8 bars)</option>
                </select>
            </div>
            <div class="key-select">
                <label for="keySelect">Key:</label>
                <select id="keySelect">
                    <option value="C">C</option>
                    <option value="Db">Db</option>
                    <option value="D">D</option>
                    <option value="Eb">Eb</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="Gb">Gb</option>
                    <option value="G">G</option>
                    <option value="Ab">Ab</option>
                    <option value="A">A</option>
                    <option value="Bb">Bb</option>
                    <option value="B">B</option>
                </select>
            </div>
        </section>

        <section class="controls">
            <div class="tempo-control">
                <label for="tempoSlider">Tempo: <span id="tempoValue">120</span> BPM</label>
                <input type="range" id="tempoSlider" min="40" max="240" value="120">
            </div>
            <div class="beats-control">
                <label for="beatsSelect">Beats per chord:</label>
                <select id="beatsSelect">
                    <option value="2">2</option>
                    <option value="4" selected>4</option>
                    <option value="8">8</option>
                </select>
            </div>
            <div class="playback-buttons">
                <button id="playBtn" class="btn btn-primary">Play</button>
                <button id="stopBtn" class="btn btn-secondary">Stop</button>
            </div>
        </section>

        <section class="tips-section">
            <h2>Practice Tips</h2>
            <div class="tip" id="currentTip">
                <p><strong>ii-V-I Tip:</strong> Focus on the guide tones (3rds and 7ths). Notice how the 7th of one chord resolves down by half-step to the 3rd of the next chord.</p>
            </div>
        </section>

        <section class="theory-section">
            <h2>Chord Tones</h2>
            <div class="theory-display" id="theoryDisplay">
                <div class="interval-row">
                    <span class="interval-label">Root:</span>
                    <span class="interval-note" id="theoryRoot">D</span>
                </div>
                <div class="interval-row">
                    <span class="interval-label">3rd:</span>
                    <span class="interval-note" id="theory3rd">F</span>
                </div>
                <div class="interval-row">
                    <span class="interval-label">5th:</span>
                    <span class="interval-note" id="theory5th">A</span>
                </div>
                <div class="interval-row">
                    <span class="interval-label">7th:</span>
                    <span class="interval-note" id="theory7th">C</span>
                </div>
                <div class="interval-row tensions">
                    <span class="interval-label">9th:</span>
                    <span class="interval-note" id="theory9th">E</span>
                </div>
                <div class="interval-row tensions">
                    <span class="interval-label">11th:</span>
                    <span class="interval-note" id="theory11th">G</span>
                </div>
                <div class="interval-row tensions">
                    <span class="interval-label">13th:</span>
                    <span class="interval-note" id="theory13th">B</span>
                </div>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>
